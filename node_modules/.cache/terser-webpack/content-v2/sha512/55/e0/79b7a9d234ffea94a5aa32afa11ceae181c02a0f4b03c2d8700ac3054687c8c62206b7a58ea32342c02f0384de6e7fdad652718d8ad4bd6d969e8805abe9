{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{\"ct+p\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"HomePageModule\",(function(){return home_module_HomePageModule}));var common=__webpack_require__(\"ofXK\"),ionic_angular=__webpack_require__(\"TEn/\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),router=__webpack_require__(\"tyNb\"),core=__webpack_require__(\"fXoL\");const _c0=[\"searchDepth\"],_c1=[\"moveTurn\"];function HomePage_pre_30_Template(rf,ctx){if(1&rf&&core.Kb(0,\"pre\",16),2&rf){const ctx_r2=core.Vb();core.Yb(\"innerHTML\",ctx_r2.result,core.ac)}}const routes=[{path:\"\",component:(()=>{class HomePage{constructor(){this.showResult=!1,this.result=\"\"}ngOnInit(){this.game=new Chess,this.board=ChessBoard(\"board\",{draggable:!0,dropOffBoard:\"trash\",sparePieces:!0})}start(){this.findSolution()}stop(){this.result=\"\",this.showResult=!1}clear(){this.board.clear(),this.game.clear(),this.result=\"\",this.showResult=!1}findSolution(){let turn,move_turn;this.depth_think=parseInt(this.depth_think_selector.nativeElement.value),move_turn=parseInt(this.move_turn_selector.nativeElement.value),turn=move_turn%2==0?\"w\":\"b\";let tmp=this.board.position(\"fen\")+\" \"+turn+\" KQkq - 0 1\";this.game.load(tmp);let res=this.iterativeSolution();if(res&&res.length>0){let prettyViewText=\"\";res.forEach(r=>{Array.isArray(r)?(r.forEach(r2=>{r2=Array.isArray(r2)?r2.join(\"\"):r2}),prettyViewText+=\"<ul>\"+r.join(\"\")+\"</ul>\"):prettyViewText+=\"<b>\"+r+\"</b><br>\"}),console.log(res),this.result=prettyViewText}else this.result=\"No solution.\";this.showResult=!0}iterativeSolution(){let solution=[];if(1==this.depth_think)return this.allMoves(),this.possibleMoves&&0!=this.possibleMoves.length?(this.possibleMoves.forEach(move=>{move.includes(\"#\")&&solution.push(move)}),solution):solution;let firstMoves=[];if(2==this.depth_think){if(firstMoves=this.allMoves(),!this.possibleMoves||0==this.possibleMoves.length)return solution;for(let i=0;i<firstMoves.length;i++){if(firstMoves[i].includes(\"#\"))continue;solution.push(\"1.\"+firstMoves[i]),this.game.move(firstMoves[i]),this.allMoves();let response,opponentsMoves=this.possibleMoves,possibleSolution=[];if(opponentsMoves&&0!=opponentsMoves.length)for(let j=0;j<opponentsMoves.length;j++){response=opponentsMoves[j],this.game.move(response),this.allMoves();let lastMoveSolution=[];if(this.possibleMoves.forEach(move=>{move.includes(\"#\")&&lastMoveSolution.push(move)}),0==lastMoveSolution.length){this.game.undo(),this.game.undo(),this.allMoves(),solution.pop();break}lastMoveSolution.length>0&&(possibleSolution.push(\"<li>2.\"+response+\" - \"+lastMoveSolution[0]+\"</li>\"),this.game.undo(),j==opponentsMoves.length-1&&(solution.push(possibleSolution),possibleSolution=[],this.game.undo()))}else solution.pop()}return solution}if(3==this.depth_think){if(firstMoves=this.allMoves(),!this.possibleMoves||0==this.possibleMoves.length)return solution;let initialState=this.game.fen();for(let i=0;i<firstMoves.length;i++){if(firstMoves[i].includes(\"#\"))continue;solution.push(\"1.\"+firstMoves[i]),this.game.move(firstMoves[i]),this.allMoves();let response,opponentsMoves=this.possibleMoves,possibleSolution=[];if(!opponentsMoves||0==opponentsMoves.length){solution.pop();continue}let stateBeforeOppenentReact=this.game.fen();for(let j=0;j<opponentsMoves.length;j++)response=opponentsMoves[j],solution.push(\"<li> >> \"+response+\"</li>\"),this.game.move(response),this.depth_think>2&&this.depth_think--,possibleSolution=this.iterativeSolution(),possibleSolution.length>0?(solution.push(possibleSolution),this.game.load(stateBeforeOppenentReact)):(solution.pop(),solution.pop(),this.game.load(initialState))}return solution}}allMoves(){if(\"8/8/8/8/8/8/8/8\"!=this.game.fen().split(\" \")[0])return this.possibleMoves=this.removeOOO(this.game.moves()),this.possibleMoves}removeOOO(arr){if(!arr||0==arr.length)return arr;let j1=arr.indexOf(\"O-O\");return-1!=j1&&arr.splice(j1,1),-1!=arr.indexOf(\"O-O-O\")&&arr.splice(j1,1),arr}}return HomePage.ɵfac=function(t){return new(t||HomePage)},HomePage.ɵcmp=core.Db({type:HomePage,selectors:[[\"app-home\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.fc(_c0,!0),core.fc(_c1,!0)),2&rf&&(core.Zb(_t=core.Ub())&&(ctx.depth_think_selector=_t.first),core.Zb(_t=core.Ub())&&(ctx.move_turn_selector=_t.first))},decls:31,vars:3,consts:[[3,\"translucent\"],[1,\"form-group\"],[1,\"form-control\"],[\"searchDepth\",\"\"],[\"value\",\"1\"],[\"value\",\"2\",\"selected\",\"\"],[\"value\",\"3\"],[\"moveTurn\",\"\"],[\"value\",\"0\",\"selected\",\"\"],[\"type\",\"button\",\"id\",\"solve\",\"value\",\"Start\",1,\"btn\",\"btn-success\",3,\"click\"],[\"type\",\"button\",\"id\",\"stop\",\"value\",\"Stop\",1,\"btn\",\"btn-danger\",3,\"click\"],[\"type\",\"button\",\"id\",\"clear\",\"value\",\"Clear\",1,\"btn\",\"btn-info\",3,\"click\"],[3,\"fullscreen\"],[\"id\",\"container\"],[\"id\",\"board\",1,\"board\"],[\"id\",\"res\",3,\"innerHTML\",4,\"ngIf\"],[\"id\",\"res\",3,\"innerHTML\"]],template:function(rf,ctx){1&rf&&(core.Mb(0,\"ion-header\",0),core.Mb(1,\"ion-toolbar\"),core.Mb(2,\"form\"),core.Mb(3,\"div\",1),core.Mb(4,\"label\"),core.ec(5,\"How many steps?\"),core.Lb(),core.Mb(6,\"select\",2,3),core.Mb(8,\"option\",4),core.ec(9,\"1\"),core.Lb(),core.Mb(10,\"option\",5),core.ec(11,\"2\"),core.Lb(),core.Mb(12,\"option\",6),core.ec(13,\"3\"),core.Lb(),core.Lb(),core.Kb(14,\"br\"),core.Mb(15,\"label\"),core.ec(16,\"First move by:\"),core.Lb(),core.Mb(17,\"select\",2,7),core.Mb(19,\"option\",8),core.ec(20,\"White\"),core.Lb(),core.Mb(21,\"option\",4),core.ec(22,\"Black\"),core.Lb(),core.Lb(),core.Lb(),core.Mb(23,\"div\",1),core.Mb(24,\"input\",9),core.Tb(\"click\",(function(){return ctx.start()})),core.Lb(),core.Mb(25,\"input\",10),core.Tb(\"click\",(function(){return ctx.stop()})),core.Lb(),core.Mb(26,\"input\",11),core.Tb(\"click\",(function(){return ctx.clear()})),core.Lb(),core.Lb(),core.Lb(),core.Lb(),core.Lb(),core.Mb(27,\"ion-content\",12),core.Mb(28,\"div\",13),core.Kb(29,\"div\",14),core.dc(30,HomePage_pre_30_Template,1,1,\"pre\",15),core.Lb(),core.Lb()),2&rf&&(core.Yb(\"translucent\",!1),core.zb(27),core.Yb(\"fullscreen\",!0),core.zb(3),core.Yb(\"ngIf\",ctx.showResult))},directives:[ionic_angular.c,ionic_angular.e,fesm2015_forms.g,fesm2015_forms.c,fesm2015_forms.d,fesm2015_forms.e,fesm2015_forms.f,ionic_angular.b,common.h],styles:[\"#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.board[_ngcontent-%COMP%]{width:90vw;margin:40px auto auto}#res[_ngcontent-%COMP%], .form-line[_ngcontent-%COMP%]{display:flex}#res[_ngcontent-%COMP%]{flex-direction:column;overflow-y:auto}#res[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{margin-top:10px;display:block;margin-bottom:-10px}#res[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]:first-child{-webkit-margin-before:0;margin-block-start:0}#res[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-margin-start:10px;margin-inline-start:10px}#res[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:circle}#res[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}\"]}),HomePage})()}];let home_routing_module_HomePageRoutingModule=(()=>{class HomePageRoutingModule{}return HomePageRoutingModule.ɵmod=core.Hb({type:HomePageRoutingModule}),HomePageRoutingModule.ɵinj=core.Gb({factory:function(t){return new(t||HomePageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),HomePageRoutingModule})(),home_module_HomePageModule=(()=>{class HomePageModule{}return HomePageModule.ɵmod=core.Hb({type:HomePageModule}),HomePageModule.ɵinj=core.Gb({factory:function(t){return new(t||HomePageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.f,home_routing_module_HomePageRoutingModule]]}),HomePageModule})()}}]);","extractedComments":[]}